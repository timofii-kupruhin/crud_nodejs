<!DOCTYPE html>
<html lang="en">
<head>
	<%- include("../partials/head.ejs") -%>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> <%= article.title %></title>

	<style>
	    body {
	      background-color: #f8f9fa;
	    }
	    .form-container {
	      max-width: 600px;
	      margin: 50px auto;
	      padding: 20px;
	      background-color: #ffffff;
	      border: 1px solid #dee2e6;
	      border-radius: 5px;
	    }
	</style>
	
</head>
<body>
 	<%- include("../partials/header.ejs") -%>
		<% article.title %>
		<% article.text %>
		<% article.date %>
	<div class="container">
	  <div class="form-container">
	    <h2>Форма редактирования статьи</h2>
	    <form id="editArticleForm" method="POST" enctype="multipart/form-data">
	      <img src="<%= article.imageSource %>" class="card-img-top mb-2" id="articleImage" width='400' height='400'>

    	  <div class="custom-file mb-2">
            <div class="input-group mb-3">
			  <input type="file" class="form-control" id="inputGroupFile01" name="image" onchange="previewFile()" accept="image/*">
			</div>
	      </div>
	      <div class="form-group" >
	        <label for="title" class="mt-3">Заголовок:</label>
	        <input type="text" class="form-control mt-1" id="title" name="title" placeholder="Введите заголовок" value="<%= article.title %>">
	      </div>

	      <div class="form-group" >
	        <label for="date" class="mt-3">Дата:</label>
	        <input type="date" class="form-control mt-1" id="date" name="date" value="<%= article.date %>">
	      </div>

	      <div class="form-group">
	        <label for="text" class="mt-3">Текст:</label>
	        <textarea class="form-control mt-1" id="text" name="text" rows="5" placeholder="Введите текст"> <%= article.text %> </textarea>
	      </div>

	      <button type="submit" class="btn btn-primary mt-3">Сохранить изменения</button>
	    </form>
	  </div>
	</div>
	<script>
		function previewFile() {
		  let preview = document.querySelector('img');
		  let file    = document.querySelector('input[type=file]').files[0];
		  let reader  = new FileReader();
		  reader.onloadend = function () {
		    preview.src = reader.result;
		  }

		  if (file) {
		    reader.readAsDataURL(file);
		  }
		}
	</script>
	<%- include("../partials/footer.ejs") -%>
</body>
</html>